 {% extends "PhysioWat/base.html" %}  
{% load static %}
{% load highcharts_tags %}
{% block app_specific_css %}
<script>
/*console.log("esisto");
var formlist=[];
var len = 5 ;
var i = 0;
{% for k,v in forms.items %}		  
	
	formlist.push("{{ k }}" );
	//console.log({{ k }});
{% endfor %}
console.log(formlist);
*/
</script>
{% endblock %}


{% block container %}
<div class="content row">

		<div class="graphs col-md-8">
			<div class="processed-signal row">
				<div id="processed-signal"> </div>
			</div>
			<hr>
			<div class="temporary-processing row">
				<div id="temporary-processing"> </div>
			</div>
		</div>

	<div class="algorithms col-md-4">
			<ul class="nav nav-tabs">
		
				{% for k,v in forms.items %}
					 <li role="presentation" class="active"><a href="#" id="nav_id_{{ k }}">{{ k }}</a></li>
					 {% endfor %}
			</ul>
			
			{% for k,v in forms.items %}		
		<!-- in the end, this contains a form. wich tag is better? div, what?-->
				<div id = "div_id_{{ k }}" style="display:none">
			   
				PARAGRAFO SHISH <br>
				 {% include "includes/bootstrap_form.html" with form=v %} 
				<br>
				<br>
				</div>
             {% endfor %}

	</div>

</div>	

{{ forms }}

{% endblock %}


{% block app_specific_js %}

{% highcharts_js 1 1 0 0 %}

<script>
"use strict";	
//SHALL I MAKE A LIST OF EVERY ONE OR JUST ITERATE?? HOW TO ITERATE ()BECAUSE HE HAS TO DO WITH EVERYTHING	
var formlist=[];


$(document).ready(function(){
	console.log("esisto");

var i = 0;
{% for k,v in forms.items %}		  
	
	formlist.push("{{ k }}");
{% endfor %}
console.log(formlist);

//DEFINE WHAT HAPPENS ON CLICK EVENT
for (var i=0; i<formlist.length; i++)
{
	var nav_id = "#nav_id_" + formlist[i];  //THIS IS THE ID OF THE BUTTON OF THE NAV
	var div_id = "#div_id_" + formlist[i]; //THIS IS THE ID OF THE IDDEN DIV WHERE THE FORM IS RENDERED
	
	//console.log(nav_id);
	console.log("fuori "+div_id);
	
	var eventData = {'divid':div_id};
	
	//eventData = {"NAV_DOWN":DIV_DOWN, "NAV_PICK":DIV_PICK};
	
	$(nav_id).attr("target", div_id);
	
	$(nav_id).click(function(e) {
		e.preventDefault(); //prevent default form submit ???? MA SERVE???
		//console.log(this);
		hide();
	//	divid = eventDAta{SELF}
		//console.log(nav_id);
		//console.log("drento "+eventData.divid);
		$(this.getAttribute("target")).show();
	}); 
}
//---------------------------
});



function hide(){
for (var i =0; i< formlist.length; i++)
	{
		var $target=$("#div_id_"+formlist[i]);
		$target.hide(); 
	}
}

function show(){
for (var i =0; i< formlist.length; i++)
	{
		var $target=$("#div_id_"+formlist[i]);
		$target.show(); 
	}
}	


hide();

	var current_id="hey i am a 64 bit variable";
	$.getJSON("{% url 'chart_getdata' 'graph1' %}", function(data) {
		$('#processed-signal').highcharts('StockChart',data);
	});
	$.getJSON("{% url 'chart_getdata' 'graph2' %}", function(data) {
		$('#temporary-processing').highcharts('StockChart',data);
	});

	$("form#data-slice").submit(function (e) {
				e.preventDefault(); //prevent default form submit
				$.getJSON("{% url 'chart_getdata' %}" + [$("#title").val(), $("#begin").val(), $("#end").val()].join('/') + '/', function(data) {
					$('#processed-signal').highcharts('StockChart',data);
				});
			});
	
	






/*
$(function () {
	$.getJSON("{% url 'chart_getdata' 'graph1' %}", function(data) {
		$('#processed-signal').highcharts('StockChart',data);
	});
	$.getJSON("{% url 'chart_getdata' 'graph2' %}", function(data) {
		$('#temporary-processing').highcharts('StockChart',data);
	});

	$("form#data-slice").submit(function (e) {
				e.preventDefault(); //prevent default form submit
				$.getJSON("{% url 'chart_getdata' %}" + [$("#title").val(), $("#begin").val(), $("#end").val()].join('/') + '/', function(data) {
					$('#processed-signal').highcharts('StockChart',data);
				});
			});
});
*/
</script>

{% endblock app_specific_js %}


